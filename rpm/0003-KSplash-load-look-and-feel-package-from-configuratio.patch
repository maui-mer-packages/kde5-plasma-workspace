From 28a49e8f8343d9d8106cd5cfecb2ab24a9eff3c7 Mon Sep 17 00:00:00 2001
From: Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
Date: Thu, 3 Jul 2014 21:46:19 +0200
Subject: [PATCH 3/5] KSplash load look and feel package from configuration

---
 ksplash/ksplashqml/SplashWindow.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/ksplash/ksplashqml/SplashWindow.cpp b/ksplash/ksplashqml/SplashWindow.cpp
index 23603f5..8e4b21d 100644
--- a/ksplash/ksplashqml/SplashWindow.cpp
+++ b/ksplash/ksplashqml/SplashWindow.cpp
@@ -86,8 +86,12 @@ void SplashWindow::setGeometry(const QRect& rect)
 
     if (oldGeometryEmpty) {
         ShellPluginLoader::init();
+
+        KConfigGroup kdeglobals(KSharedConfig::openConfig("kdeglobals"), QStringLiteral("General"));
+        const QString lookAndFeel = kdeglobals.readEntry(QStringLiteral("LookAndFeel"), QStringLiteral("org.kde.lookandfeel"));
+
         Plasma::Package pkg = Plasma::PluginLoader::self()->loadPackage("Plasma/LookAndFeel");
-        pkg.setPath("org.kde.lookandfeel");
+        pkg.setPath(lookAndFeel);
 
         setSource(QUrl::fromLocalFile(pkg.filePath("splashmainscript")));
     }
-- 
1.9.1

