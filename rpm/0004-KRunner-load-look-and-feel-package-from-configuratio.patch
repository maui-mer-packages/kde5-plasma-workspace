From 6b6d6132d0a349b41219e7871190139db21f380a Mon Sep 17 00:00:00 2001
From: Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
Date: Thu, 3 Jul 2014 21:47:27 +0200
Subject: [PATCH 4/5] KRunner load look and feel package from configuration

---
 krunner/view.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/krunner/view.cpp b/krunner/view.cpp
index 488b342..80e07bc 100644
--- a/krunner/view.cpp
+++ b/krunner/view.cpp
@@ -79,8 +79,12 @@ View::View(QWindow *parent)
     }
 
     ShellPluginLoader::init();
+
+    KConfigGroup kdeglobals(KSharedConfig::openConfig("kdeglobals"), QStringLiteral("General"));
+    const QString lookAndFeel = kdeglobals.readEntry(QStringLiteral("LookAndFeel"), QStringLiteral("org.kde.lookandfeel"));
+
     Plasma::Package pkg = Plasma::PluginLoader::self()->loadPackage("Plasma/LookAndFeel");
-    pkg.setPath("org.kde.lookandfeel");
+    pkg.setPath(lookAndFeel);
 
     m_qmlObj = new KDeclarative::QmlObject(this);
     m_qmlObj->setInitializationDelayed(true);
-- 
1.9.1

